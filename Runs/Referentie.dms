///////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                           //
//                         (C) VESTA 2020 - Planbureau voor de Leefomgeving                                  //
//                                                                                                           //
///////////////////////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                           //
//Bij gebruik van het Vesta-model zie:                                                                       //
//https://github.com/RuudvandenWijngaart/VestaDV/wiki/F.1-Installatie-Instructies#vraag-vanuit-het-vesta-team//
//                                                                                                           //
///////////////////////////////////////////////////////////////////////////////////////////////////////////////

container Referentie
{
	parameter<string> Variantcode := 'Ref2030';
	#include <%projDir%/model/Units.dms>
	#include <%projDir%/model/Geography.dms>
	#include <%projDir%/model/Classifications.dms>

	// Hier kun je meer of minder rekenstappen per jaar gaan definieren. Pas dan ook de onderstaande attribuutdata aan.
	// Waarschijnlijk moet de eerste rekenstap wel verwijzen naar het eerste zichtjaar en moeten volgende rekenstappen niet naar eerdere jaren verwijzen.	
	unit<uint8> rekenstap: nrofrows = 5
	{
		attribute<units/yr_uint16> Jaar  : [2010, 2020, 2030, 2040, 2050];
		
		// bij label en name kun je eigen rekenstappen opgeven. Deze namen moeten overeen komen met:
		// - namen van subitems van in Invoer/SpecifiekeInstellingen
		attribute<string>          label := string(id(.))+'_'+string(Jaar);
		attribute<string>          name  := id(.) == 0b ? 'StartJaar' : 'R' + label; 
	}
	
	#include <%projDir%/runs/SharedInvoer.dms>
	container Invoer: Using = "Units"
	{
		// Gemeentes als selectie: 'NL' or a set of municipality codes, 
//		parameter<string> StudieGebied: ['NL'];
//		parameter<string> StudieGebied: ['GM0344'];  // Utrecht
//		parameter<string> StudieGebied: ['GM0034'];  // Alkmaar
//		parameter<string> StudieGebied: ['GM0088'];  // Schiermonnikoog, geen warmtebronnen
//		parameter<string> StudieGebied: ['GM0448'];  // Texel, 1 warmtebron
//		parameter<string> StudieGebied: ['GM0453,GM0375,GM0396'];

		// OR RES als selectie
		parameter<string> RES_StudieGebied : ['RESU10_U16'];
//		parameter<string> RES_StudieGebied : ['RESNoordHollandZuid']; // Deze RES geeft problemen wegens doorsnijding van bestaande warmtenetten.
		parameter<string> StudieGebied     := Geography/RegioIndelingen/Energieregio/GM_code_list[rlookup(RES_StudieGebied, Geography/RegioIndelingen/Energieregio/name)];
		
		// Include Invoer and defaults settings section, similar for each run
		#include <%projDir%/model/RuimtelijkeData.dms>
		#include <%projDir%/model/Kengetallen.dms>
		
		#include <%projDir%/model/EnergiePrijzen.dms>

		container DefaultInstellingen
		{
			#include <%projDir%/Runs/DefaultSettings/Basis.dms>
			#include <%projDir%/Runs/DefaultSettings/Rekenstap.dms>		
		}
		
		container SpecifiekeInstellingen := DefaultInstellingen/Basis
		{
			parameter<string> prijzenbron := 'Energieprijzen/20250108_Energieprijzen', Descr = "Gebaseerd op CBS voor statistiekjaren, projecties vor grijze elektriciteit en gas op basis van de KEV2024, projecties groene elektriciteit en groen gas op basis van TVKN";
			parameter<bool> HasStartingArcSet := true;
			
			container StartJaar := DefaultInstellingen/Basis;
			
			// Per rekenstap kun je hier specifieke instelling overrulen. De lijst van rekenstappen wordt gedefinieerd bij rekenstap
			container R1_2020 := DefaultInstellingen/Rekenstap/Stap_1;
			container R2_2030 := R1_2020;
			container R3_2040 := R2_2030;
			container R4_2050 := R3_2040;
		}
	}

	#include <%projDir%/model/stam.dms>
	#include <%projDir%/model/BeginSituatie.dms>
	#include <%projDir%/model/TussenResultaten.dms>
	#include <%projDir%/model/Resultaten.dms>
	#include <%projDir%/model/ConfigSettings.dms>
	#include <%projDir%/model/ExportSettings.dms>
}
